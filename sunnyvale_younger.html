<!DOCTYPE html>
<html>
  <head>
    <title>Critical Crossroads</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="html5up-story/assets/css/main.css" />
    <noscript
      ><link rel="stylesheet" href="html5up-story/assets/css/noscript.css"
    /></noscript>
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper" class="divided">
      <!-- One -->
      <section
        class="banner style1 orient-left content-align-left image-position-right fullscreen"
      >
        <div class="content">
          <h1>The Enchanted Treasure of Sunnyvale Forest</h1>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/landing.png" alt="" />
        </div>
      </section>

      <!-- Two -->
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
        id="first"
      >
        <div class="content">
          <p id="para2">
            Once upon a time, in a little village, there was a girl named Daisy.
            She was very curious and loved her dog, Elise, a lot. But one day,
            Elise went away, and Daisy felt very sad.
          </p>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/1.png" alt="" />
        </div>
      </section>

      <!-- Three -->
      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para3">
            One sunny day, Daisy decided to go for a walk outside her village.
            She found a secret path that led to a magical forest called
            Sunnyvale Forest. In the forest, there were talking animals and
            beautiful flowers.
          </p>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/2.png" alt="" />
        </div>
      </section>

      <!-- Four -->
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para4">
            Daisy became friends with the animals and learned important things
            like being kind to nature and others. She loved visiting the magical
            forest because it made her happy.
          </p>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/3.png" alt="" />
        </div>
      </section>

      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para5">
            One day, Daisy heard about a special crystal hidden deep in the
            forest. It was said that the crystal could grant any wish. Daisy
            wanted to wish for Elise to come back.
          </p>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/4.png" alt="" />
        </div>
      </section>

      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para6">
            As Daisy went on her adventure to find the crystal, she met
            challenges but did not give up. Finally, she found the crystal.
          </p>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/5.png" alt="" />
        </div>
      </section>

      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para7">
            But just as she was about to make her wish, a wise owl warned her
            that using the crystal would hurt the forest.
          </p>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/6.png" alt="" />
        </div>
      </section>

      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para8">
            Daisy had to decide: Should she make her wish and bring Elise back,
            or leave the crystal and protect her new friends' home?
          </p>
        </div>
        <div class="image">
          <img src="sunnyvale_younger/7.png" alt="" />
        </div>
      </section>

      <!-- Six -->
      <form id="submit-form" method="post">
        <section class="wrapper style1 align-center">
          <div class="inner">
            <h2>What should Daisy do?</h2>
            <div class="items style1 medium onscroll-fade-in">
              <section>
                <p>Leave Sunnyvale Forest</p>

                <input
                  type="radio"
                  id="choice-1"
                  name="choice-button"
                  value="choice-1"
                  checked
                />
                <label for="choice-1">Select Choice</label>
              </section>
              <section>
                <p>Wish on the Crystal & Save Elise</p>
                <input
                  type="radio"
                  id="choice-2"
                  name="choice-button"
                  value="choice-2"
                />
                <label for="choice-2">Select Choice</label>
              </section>
              <section>
                <p>I will make my own ending</p>
                <input
                  type="radio"
                  id="choice-3"
                  name="choice-button"
                  value="choice-3"
                />
                <label for="choice-3">Select Choice</label>
              </section>
            </div>
          </div>
        </section>

        <!-- Seven -->
        <section class="wrapper style1 align-center">
          <div class="inner medium">
            <h2>Why did you make this choice?</h2>
            <div class="fields">
              <div class="field">
                <textarea
                  name="choice_input"
                  id="message"
                  rows="6"
                  placeholder="Share your thoughts here!"
                ></textarea>
                <button id="speechButton">Speech to text</button>
              </div>
            </div>
            <ul class="actions special">
              <li>
                <input
                  type="submit"
                  name="choice_submission"
                  id="submit-journal"
                  value="Complete the journal here"
                />
              </li>
            </ul>
          </div>
        </section>
      </form>
      <section class="wrapper style1 align-center">
        <div class="inner" id="conclusion"></div>
      </section>

      <!-- Footer -->
      <footer class="wrapper style1 align-center">
        <div class="inner">
          <p>&copy; Res Novae 2024</p>
        </div>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="html5up-story/assets/js/jquery.min.js"></script>
    <script src="html5up-story/assets/js/jquery.scrollex.min.js"></script>
    <script src="html5up-story/assets/js/jquery.scrolly.min.js"></script>
    <script src="html5up-story/assets/js/browser.min.js"></script>
    <script src="html5up-story/assets/js/breakpoints.min.js"></script>
    <script src="html5up-story/assets/js/util.js"></script>
    <script src="html5up-story/assets/js/main.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Get the container

        // Get the button
        var submitForm = document.getElementById("submit-form");

        submitForm.addEventListener("submit", function (event) {
          event.preventDefault();
          var formData = new FormData(event.target);
          var choice = "";
          for (const [key, value] of formData.entries()) {
            if (key == "choice-button") {
              choice = value;
            }
          }

          if (choice === "choice-1" || choice === "choice-2") {
            var container = document.getElementById("conclusion");
            // Create h2 element
            var conclusionTitle = document.createElement("h1");
            conclusionTitle.textContent = "Conclusion";

            // Create img element
            var imgDiv = document.createElement("div");
            var img = document.createElement("img");
            if (choice === "choice-1") {
              img.src = "sunnyvale_younger/9.png";
            } else if (choice === "choice-2") {
              img.src = "sunnyvale_younger/10.png";
            }
            img.alt = "alt";
            imgDiv.classList.add("image");
            imgDiv.classList.add("fit");
            imgDiv.appendChild(img);

            // Create the body element
            var conclusionHeader = document.createElement("h2");
            var conclusionBody = document.createElement("p");
            if (choice === "choice-1") {
              conclusionHeader.textContent = "Leave Sunnyvale Forest";
              conclusionBody.innerHTML =
                "Daisy decided not to make her wish. She did not want to hurt the forest or her new friends. She felt sad but knew it was the right thing to do. She left the forest feeling hopeful and happy with her new forest friends.";
            } else if (choice == "choice-2") {
              conclusionHeader.textContent = "Wish on the Crystal & Save Elise";
              conclusionBody.innerHTML =
                "Daisy could not resist the thought of having Elise back. She made her wish, and Elise appeared! But the forest started shaking and breaking. Daisy and Elise hurried back to the village, but no one knew what had happened in the forest.<br/><br/>Daisy tried to go back to the magical forest later, but the path was gone. She felt bad for what happened to her friends' home and hoped she could make it up to them one day.";
            }

            var hr = document.createElement("hr");

            var postStoryQuestionsUL = document.createElement("ul");
            var questions = [
              "How would you feel if your friend made a choice that could hurt you?",
              "Would it be okay to only think about ourselves?",
              "Why is it important to consider how other people might feel about our actions or decisions?",
            ];
            for (var i = 0; i < questions.length; i++) {
              var li = document.createElement("li");
              li.textContent = questions[i];
              postStoryQuestionsUL.appendChild(li);
            }

            // Append the elements to container
            container.appendChild(conclusionTitle);
            container.appendChild(imgDiv);
            container.appendChild(conclusionHeader);
            container.appendChild(conclusionBody);
            container.appendChild(hr);
            container.appendChild(postStoryQuestionsUL);
          }
          document.getElementById("submit-journal").remove();
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        $("#submit-form").on("submit", function (e) {
          e.preventDefault(); // Prevent the default form submission

          var dataString = $(this).serialize();

          $.ajax({
            type: "POST",
            url: "https://formspree.io/f/xkndpjgo", // Replace with your FormSubmit endpoint
            data: dataString,
            cache: false,
          });
        });
      });
    </script>
    <script>
      // Function to start speech synthesis
      function startSpeech(text) {
        const speech = new SpeechSynthesisUtterance(text);
        speechSynthesis.speak(speech);
      }

      // Function to stop speech synthesis
      function stopSpeech() {
        speechSynthesis.cancel();
      }

      // Intersection Observer configuration
      const options = {
        root: null,
        rootMargin: "0px",
        threshold: 1.0, // Change this threshold value according to your requirement
      };

      // Callback function to handle intersection changes
      function handleIntersection(entries, observer) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            // Start speech when the div enters the viewport
            startSpeech(entry.target.innerText);
          } else {
            // Stop speech when the div leaves the viewport
            stopSpeech();
          }
        });
      }

      // Create Intersection Observer instance
      const observer = new IntersectionObserver(handleIntersection, options);

      // Target the div
      const targetDivs = document.querySelectorAll(
        "#para1, #para2, #para3, #para4, #para5, #para6, #para7, #para8, #para9, #para10"
      );

      // Start observing the div
      targetDivs.forEach((div) => {
        observer.observe(div);
      });
    </script>
    <script>
      const speechButton = document.getElementById("speechButton");
      const speechInput = document.getElementById("message");
      let recognition = null;
      let isListening = false;

      function startSpeechRecognition() {
        if (!("webkitSpeechRecognition" in window)) {
          speechInput.value =
            "Your browser does not support speech recognition.";
          return;
        }

        recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = false;
        recognition.lang = "en-US";

        recognition.onstart = function () {
          speechInput.value = "Listening...";
          isListening = true;
        };

        recognition.onresult = function (event) {
          speechInput.value = event.results[0][0].transcript;
        };

        recognition.onerror = function (event) {
          speechInput.value = "Error occurred in recognition: " + event.error;
        };

        recognition.start();
      }

      speechButton.addEventListener("click", (event) => {
        event.preventDefault();
        if (isListening) {
          recognition.stop();
          speechButton.textContent = "Start Speech Recognition";
          isListening = false;
        } else {
          startSpeechRecognition();
          speechButton.textContent = "Stop Speech Recognition";
        }
      });
    </script>
  </body>
</html>
