<!DOCTYPE html>
<html>
  <head>
    <title>Critical Crossroads</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="html5up-story/assets/css/main.css" />
    <noscript
      ><link rel="stylesheet" href="html5up-story/assets/css/noscript.css"
    /></noscript>
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper" class="divided">
      <!-- One -->
      <section
        class="banner style1 orient-left content-align-left image-position-right fullscreen"
      >
        <div class="content">
          <h1>The Lost Kitten</h1>
          <p class="major" id="para1">
            Lily is a happy girl who lives in a little village.
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten1.png" alt="" />
        </div>
      </section>

      <!-- Two -->
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
        id="first"
      >
        <div class="content">
          <p id="para2">
            One day, she finds a stray kitten.
            <br /><br />The kitten has no collar and seems to have been lost in
            the woods for a long time.

            <br /><br />The kitten is very scared of her, but Lily immediately
            starts to like it.
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten2.png" alt="" />
        </div>
      </section>

      <!-- Three -->
      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para3">
            She feeds the kitten some milk and makes friends with it.
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten3.png" alt="" />
        </div>
      </section>

      <!-- Four -->
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para4">
            Every day, she returns to the spot near her village to play with the
            kitten and take care of it.
            <br /><br />
            She grows to love the kitten and forms a deep bond with it.
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten4.png" alt="" />
        </div>
      </section>

      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para5">
            One day when Lily is on her way home after school, she see a little
            girl looking sad and sitting alone at a pond nearby.
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten5.png" alt="" />
        </div>
      </section>
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para6">
            Lily slowly approaches the girl and recognises her to be her friend,
            Gwen!
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten6.png" alt="" />
        </div>
      </section>
      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para7">
            Gwen says that she recently lost her kitten, Bubbles, and she misses
            her dearly.
            <br /><br />
            She thought that she would have a bit more time to search for
            Bubbles but she will be moving away to the big city the very next
            day. <br /><br />
            Today would be her last day to find Bubbles and till now she has not
            seen a single sign of her best friend, Bubbles.
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten7.png" alt="" />
        </div>
      </section>
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para8">
            Lily immediately recognises that Bubbles is the kitten she had
            found. What should Lily do?
            <br /><br />
            Should Lily reveal to Gwen that she knows Bubbles?
            <br /><br />
            Or should Lily pretend to not know and keep Bubbles a secret?
          </p>
        </div>
        <div class="image">
          <img src="lostkitten/lostkitten9.png" alt="" />
        </div>
      </section>

      <!-- Six -->
      <form id="submit-form" method="post">
        <section class="wrapper style1 align-center">
          <div class="inner">
            <h2>What would you do if you were Lily?</h2>
            <div class="items style1 medium onscroll-fade-in">
              <section>
                <p>
                  I will reveals that I knows Bubbles and risk never seeing
                  Bubbles again.
                </p>

                <input
                  type="radio"
                  id="choice-1"
                  name="choice-button"
                  value="choice-1"
                  checked
                />
                <label for="choice-1">Select Choice</label>
              </section>
              <section>
                <p>I will keep Bubbles a secret.</p>
                <input
                  type="radio"
                  id="choice-2"
                  name="choice-button"
                  value="choice-2"
                />
                <label for="choice-2">Select Choice</label>
              </section>
              <section>
                <p>I will make my own ending.</p>
                <input
                  type="radio"
                  id="choice-3"
                  name="choice-button"
                  value="choice-3"
                />
                <label for="choice-3">Select Choice</label>
              </section>
            </div>
          </div>
        </section>

        <!-- Seven -->
        <section class="wrapper style1 align-center">
          <div class="inner medium">
            <h2>What made you choose that choice?</h2>
            <div class="fields">
              <div class="field">
                <textarea
                  name="choice_input"
                  id="message"
                  rows="6"
                  placeholder="Share your thoughts here!"
                ></textarea>
                <button id="speechButton">Speech to text</button>
              </div>
            </div>
            <ul class="actions special">
              <li>
                <input
                  type="submit"
                  name="choice_submission"
                  id="submit-journal"
                  value="Complete the journal here"
                />
              </li>
            </ul>
          </div>
        </section>
      </form>
      <section class="wrapper style1 align-center">
        <div class="inner" id="conclusion"></div>
      </section>

      <!-- Footer -->
      <footer class="wrapper style1 content-align-left">
        <div class="inner">
          <p>&copy; Res Novae 2024</p>
        </div>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="html5up-story/assets/js/jquery.min.js"></script>
    <script src="html5up-story/assets/js/jquery.scrollex.min.js"></script>
    <script src="html5up-story/assets/js/jquery.scrolly.min.js"></script>
    <script src="html5up-story/assets/js/browser.min.js"></script>
    <script src="html5up-story/assets/js/breakpoints.min.js"></script>
    <script src="html5up-story/assets/js/util.js"></script>
    <script src="html5up-story/assets/js/main.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Get the container

        // Get the button
        var submitForm = document.getElementById("submit-form");

        submitForm.addEventListener("submit", function (event) {
          event.preventDefault();
          var formData = new FormData(event.target);
          var choice = "";
          for (const [key, value] of formData.entries()) {
            if (key == "choice-button") {
              choice = value;
            }
          }

          if (choice === "choice-1" || choice === "choice-2") {
            var container = document.getElementById("conclusion");
            // Create h2 element
            var conclusionTitle = document.createElement("h1");
            conclusionTitle.textContent = "Conclusion";

            // Create img element
            var imgDiv = document.createElement("div");
            var img = document.createElement("img");
            if (choice === "choice-1") {
              img.src = "lostkitten/lostkitten10.png";
            } else if (choice === "choice-2") {
              img.src = "lostkitten/lostkitten11.png";
            }
            img.alt = "alt";
            imgDiv.classList.add("image");
            imgDiv.classList.add("fit");
            imgDiv.appendChild(img);

            // Create the body element
            var conclusionHeader = document.createElement("h2");
            var conclusionBody = document.createElement("div");
            if (choice === "choice-1") {
              conclusionHeader.textContent = "Reveal Bubbles";
              conclusionBody.innerHTML =
                "Lily asks Gwen to wait there and leaves to find Bubbles.<br/><br/>She brings Bubbles to Gwen whose eyes are filled with tears of joy.<br/><br/>Seeing Gwen, Bubbles jumps into Gwen's arms.<br/><br/>Bubbles may be leaving the village along with Gwen, but nothing is truly lost.<br/><br/>The memories she and Bubbles shared will always remain close to her heart.";
            } else if (choice == "choice-2") {
              conclusionHeader.textContent = "Keep Bubbles a secret";
              conclusionBody.innerHTML =
                "As Lily and Bubbles both rest on the grass, Lily feels a tug on her heart as she thinks about how Gwen looked when she left.<br/><br/>She felt sad at having hidden the truth about Bubbles from her.<br/><br/>Would she ever be able to meet Gwen again and ask for her forgiveness for the choice she made?<br/><br/>Only time will tell but Lily had a feeling that the warmth of her newfound friend beside her would give her the courage when that time does come.Lily and Bubbles both rest on the grass.";
            }

            var hr = document.createElement("hr");

            var postStoryQuestionsUL = document.createElement("ul");
            var questions = [
              "Would keeping Bubbles a secret be a form of lying?",
              "Would you lie for something good? Why or why not?",
              "How would you feel if you found out you were lied to?",
            ];
            for (var i = 0; i < questions.length; i++) {
              var li = document.createElement("li");
              li.textContent = questions[i];
              postStoryQuestionsUL.appendChild(li);
            }

            // Append the elements to container
            container.appendChild(conclusionTitle);
            container.appendChild(imgDiv);
            container.appendChild(conclusionHeader);
            container.appendChild(conclusionBody);
            container.appendChild(hr);
            container.appendChild(postStoryQuestionsUL);
          }
          document.getElementById("submit-journal").remove();
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        $("#submit-form").on("submit", function (e) {
          e.preventDefault(); // Prevent the default form submission

          var dataString = $(this).serialize();

          $.ajax({
            type: "POST",
            url: "https://formspree.io/f/xnqeojdy", // Replace with your FormSubmit endpoint
            data: dataString,
            cache: false,
          });
        });
      });
    </script>
    <script>
      // Function to start speech synthesis
      function startSpeech(text) {
        const speech = new SpeechSynthesisUtterance(text);
        speechSynthesis.speak(speech);
      }

      // Function to stop speech synthesis
      function stopSpeech() {
        speechSynthesis.cancel();
      }

      // Intersection Observer configuration
      const options = {
        root: null,
        rootMargin: "0px",
        threshold: 1.0, // Change this threshold value according to your requirement
      };

      // Callback function to handle intersection changes
      function handleIntersection(entries, observer) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            // Start speech when the div enters the viewport
            startSpeech(entry.target.innerText);
          } else {
            // Stop speech when the div leaves the viewport
            stopSpeech();
          }
        });
      }

      // Create Intersection Observer instance
      const observer = new IntersectionObserver(handleIntersection, options);

      // Target the div
      const targetDivs = document.querySelectorAll(
        "#para1, #para2, #para3, #para4, #para5, #para6, #para7, #para8"
      );

      // Start observing the div
      targetDivs.forEach((div) => {
        observer.observe(div);
      });
    </script>
    <script>
      const speechButton = document.getElementById("speechButton");
      const speechInput = document.getElementById("message");
      let recognition = null;
      let isListening = false;

      function startSpeechRecognition() {
        if (!("webkitSpeechRecognition" in window)) {
          speechInput.value =
            "Your browser does not support speech recognition.";
          return;
        }

        recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = false;
        recognition.lang = "en-US";

        recognition.onstart = function () {
          speechInput.value = "Listening...";
          isListening = true;
        };

        recognition.onresult = function (event) {
          speechInput.value = event.results[0][0].transcript;
        };

        recognition.onerror = function (event) {
          speechInput.value = "Error occurred in recognition: " + event.error;
        };

        recognition.start();
      }

      speechButton.addEventListener("click", (event) => {
        event.preventDefault();
        if (isListening) {
          recognition.stop();
          speechButton.textContent = "Start Speech Recognition";
          isListening = false;
        } else {
          startSpeechRecognition();
          speechButton.textContent = "Stop Speech Recognition";
        }
      });
    </script>
  </body>
</html>
