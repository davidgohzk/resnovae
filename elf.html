<!DOCTYPE html>
<html>
  <head>
    <title>Critical Crossroads</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="html5up-story/assets/css/main.css" />
    <noscript
      ><link rel="stylesheet" href="html5up-story/assets/css/noscript.css"
    /></noscript>
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper" class="divided">
      <!-- One -->
      <section
        class="banner style1 orient-left content-align-left image-position-right fullscreen"
      >
        <div class="content">
          <h1>The Dark Elf Child</h1>
          <p class="major" id="para1">
            A long time ago, there used to be fantastical creatures that lived
            alongside humans. Elves, halflings, dwarfs and gnomes.
            <br /><br />
            One of the races of elves were the Dark Elves who were known as
            Drow.
          </p>
        </div>
        <div class="image">
          <img src="elf/1.png" alt="" />
        </div>
      </section>

      <!-- Two -->
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
        id="first"
      >
        <div class="content">
          <p id="para2">
            The Drow were seen as a really mean group by everyone. They were
            always up to no good, playing tricks and causing problems with other
            groups of creatures. People thought of them like the bad guys, and
            if they were found near where humans lived, they'd be taken away by
            the police right away.
            <br /><br />
            People treated the Drows so badly that they stopped talking to other
            civilizations. For many, many years, humans and Drows fought many
            wars against each other. The last big war between humans and Drows
            ended years ago. Now, humans and Drows hardly ever see each other
            because there's peace between them.
          </p>
        </div>
        <div class="image">
          <img src="elf/2.png" alt="" />
        </div>
      </section>

      <!-- Three -->
      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para3">
            One day, while Jude is on his way to a nearby town for a new
            adventure, he notices something strange happening on the outskirts
            of the town. There's a lot of noise and activity going on, and it
            catches his attention. She feeds the kitten some milk and makes
            friends with it.
          </p>
        </div>
        <div class="image">
          <img src="elf/3.png" alt="" />
        </div>
      </section>

      <!-- Four -->
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para4">
            As Jude approaches the commotion, they see a group of human children
            picking on someone small child who is sitting on the ground. When he
            steps in to help, he realises that the person being bullied is
            actually a Drow child named Gary.
          </p>
        </div>
        <div class="image">
          <img src="elf/4.png" alt="" />
        </div>
      </section>

      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para5">
            Gary shares with Jude and that he was abandoned by his Drow village
            because he was an orphan. He just wants a chance to live somewhere
            new and fit in, insisting he's different from other Drow and wants
            to be good.
          </p>
        </div>
        <div class="image">
          <img src="elf/5.png" alt="" />
        </div>
      </section>
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para6">
            Not sure what to think, Jude decides to help Gary settle into the
            human town where they're currently working. Despite the town's
            general tolerance towards Gary, he still senses their underlying
            fear and mistrust.
          </p>
        </div>
        <div class="image">
          <img src="elf/6.png" alt="" />
        </div>
      </section>
      <section
        class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para7">
            Weeks go by, but one night, there's a big disturbance in town. Jude
            discovers that Gary and a child from the town are missing.
            <br /><br />
            Rumours start spreading that Gary has revealed his true nature,
            causing everyone to become fearful and angry, directing their
            resentment towards him.
          </p>
        </div>
        <div class="image">
          <img src="elf/7.png" alt="" />
        </div>
      </section>
      <section
        class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
      >
        <div class="content">
          <p id="para8">
            Search parties are organised with Jude to look for the missing child
            from the town and Gary in the nearby woods. After a while of
            searching, they come across Gary standing alone in a clearing,
            looking sad. Sadly, there's no sign of the missing child from the
            village.
            <br /><br />
            Jude asks Gary if he's seen the missing child, but Gary seems lost
            in thought and doesn't respond. Now, Jude and the search parties
            have to make a tough decision. Should they tell the town authorities
            they found Gary and hand him over, or should they trust Gary and try
            to figure out what really happened?
          </p>
        </div>
        <div class="image">
          <img src="elf/8.png" alt="" />
        </div>
      </section>

      <!-- Six -->
      <form id="submit-form" method="post">
        <section class="wrapper style1 align-center">
          <div class="inner">
            <h2>What should Jude do?</h2>
            <div class="items style1 medium onscroll-fade-in">
              <section>
                <p>Protect Gary from townspeople and hear him out</p>

                <input
                  type="radio"
                  id="choice-1"
                  name="choice-button"
                  value="choice-1"
                  checked
                />
                <label for="choice-1">Select Choice</label>
              </section>
              <section>
                <p>Turn Gary over to the townspeople</p>
                <input
                  type="radio"
                  id="choice-2"
                  name="choice-button"
                  value="choice-2"
                />
                <label for="choice-2">Select Choice</label>
              </section>
              <section>
                <p>I will make my own ending.</p>
                <input
                  type="radio"
                  id="choice-3"
                  name="choice-button"
                  value="choice-3"
                />
                <label for="choice-3">Select Choice</label>
              </section>
            </div>
          </div>
        </section>

        <!-- Seven -->
        <section class="wrapper style1 align-center">
          <div class="inner medium">
            <h2>What made you choose that choice?</h2>
            <div class="fields">
              <div class="field">
                <textarea
                  name="choice_input"
                  id="message"
                  rows="6"
                  placeholder="Share your thoughts here!"
                ></textarea>
                <button id="speechButton">Speech to text</button>
              </div>
            </div>
            <ul class="actions special">
              <li>
                <input
                  type="submit"
                  name="choice_submission"
                  id="submit-journal"
                  value="Complete the journal here"
                />
              </li>
            </ul>
          </div>
        </section>
      </form>
      <section class="wrapper style1 align-center">
        <div class="inner" id="conclusion"></div>
      </section>

      <!-- Footer -->
      <footer class="wrapper style1 content-align-left">
        <div class="inner">
          <p>&copy; Res Novae 2024</p>
        </div>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="html5up-story/assets/js/jquery.min.js"></script>
    <script src="html5up-story/assets/js/jquery.scrollex.min.js"></script>
    <script src="html5up-story/assets/js/jquery.scrolly.min.js"></script>
    <script src="html5up-story/assets/js/browser.min.js"></script>
    <script src="html5up-story/assets/js/breakpoints.min.js"></script>
    <script src="html5up-story/assets/js/util.js"></script>
    <script src="html5up-story/assets/js/main.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Get the container

        // Get the button
        var submitForm = document.getElementById("submit-form");

        submitForm.addEventListener("submit", function (event) {
          event.preventDefault();
          var formData = new FormData(event.target);
          var choice = "";
          for (const [key, value] of formData.entries()) {
            if (key == "choice-button") {
              choice = value;
            }
          }

          if (choice === "choice-1" || choice === "choice-2") {
            var container = document.getElementById("conclusion");
            // Create h2 element
            var conclusionTitle = document.createElement("h1");
            conclusionTitle.textContent = "Conclusion";

            // Create img element
            var imgDiv = document.createElement("div");
            var img = document.createElement("img");
            if (choice === "choice-1") {
              img.src = "elf/9.png";
            } else if (choice === "choice-2") {
              img.src = "elf/10.png";
            }
            img.alt = "alt";
            imgDiv.classList.add("image");
            imgDiv.classList.add("fit");
            imgDiv.appendChild(img);

            // Create the body element
            var conclusionHeader = document.createElement("h2");
            var conclusionBody = document.createElement("div");
            if (choice === "choice-1") {
              conclusionHeader.textContent =
                "Protect Gary from townspeople and hear him out";
              conclusionBody.innerHTML =
                "Jude holds onto Gary and consoles him. Gary says in between sobs. “There was a masked man! He kidnapped my friend and fled into the forest. I tried to chase him but he got away!” Jude realises then that the kidnapper must have been trying to frame Gary. He may have wanted to hurt Gary’s chances of fitting in at the village. By the description of the kidnapper’s attire, Jude realises that the kidnapper was from the neighbouring village.<br/><br/>Jude and his party return to the village with Gary and share what happened. Jude promises to bring back the kidnapped child from the next village. The townspeople realise that it was all a misunderstanding and with their trust, Jude's party continues their journey, heading to the next village to rescue the kidnapped child.";
            } else if (choice == "choice-2") {
              conclusionHeader.textContent =
                "Turn Gary over to the townspeople";
              conclusionBody.innerHTML =
                "Jude brings Gary back to the authorities. The last thing they remember as they leave the town and continue on their journey is Gary’s face which has a mixture of guilt, betrayal, and sadness.";
            }

            var hr = document.createElement("hr");

            var postStoryQuestionsUL = document.createElement("ul");
            var questions = [
              "Would you defend one person at the cost of being criticised by everyone?",
              "Should we always choose the outcome with less affected people?",
              "What if someone close to you was the dark elf child or the village child who went missing?",
              "How would your decision-making change?",
              "How would you feel if you decided not to make a decision?",
            ];
            for (var i = 0; i < questions.length; i++) {
              var li = document.createElement("li");
              li.textContent = questions[i];
              postStoryQuestionsUL.appendChild(li);
            }

            // Append the elements to container
            container.appendChild(conclusionTitle);
            container.appendChild(imgDiv);
            container.appendChild(conclusionHeader);
            container.appendChild(conclusionBody);
            container.appendChild(hr);
            container.appendChild(postStoryQuestionsUL);
          }
          document.getElementById("submit-journal").remove();
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        $("#submit-form").on("submit", function (e) {
          e.preventDefault(); // Prevent the default form submission

          var dataString = $(this).serialize();

          $.ajax({
            type: "POST",
            url: "https://formspree.io/f/xkndpjgo", // Replace with your FormSubmit endpoint
            data: dataString,
            cache: false,
          });
        });
      });
    </script>
    <script>
      // Function to start speech synthesis
      function startSpeech(text) {
        const speech = new SpeechSynthesisUtterance(text);
        speechSynthesis.speak(speech);
      }

      // Function to stop speech synthesis
      function stopSpeech() {
        speechSynthesis.cancel();
      }

      // Intersection Observer configuration
      const options = {
        root: null,
        rootMargin: "0px",
        threshold: 1.0, // Change this threshold value according to your requirement
      };

      // Callback function to handle intersection changes
      function handleIntersection(entries, observer) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            // Start speech when the div enters the viewport
            startSpeech(entry.target.innerText);
          } else {
            // Stop speech when the div leaves the viewport
            stopSpeech();
          }
        });
      }

      // Create Intersection Observer instance
      const observer = new IntersectionObserver(handleIntersection, options);

      // Target the div
      const targetDivs = document.querySelectorAll(
        "#para1, #para2, #para3, #para4, #para5, #para6, #para7, #para8"
      );

      // Start observing the div
      targetDivs.forEach((div) => {
        observer.observe(div);
      });
    </script>
    <script>
      const speechButton = document.getElementById("speechButton");
      const speechInput = document.getElementById("message");
      let recognition = null;
      let isListening = false;

      function startSpeechRecognition() {
        if (!("webkitSpeechRecognition" in window)) {
          speechInput.value =
            "Your browser does not support speech recognition.";
          return;
        }

        recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = false;
        recognition.lang = "en-US";

        recognition.onstart = function () {
          speechInput.value = "Listening...";
          isListening = true;
        };

        recognition.onresult = function (event) {
          speechInput.value = event.results[0][0].transcript;
        };

        recognition.onerror = function (event) {
          speechInput.value = "Error occurred in recognition: " + event.error;
        };

        recognition.start();
      }

      speechButton.addEventListener("click", (event) => {
        event.preventDefault();
        if (isListening) {
          recognition.stop();
          speechButton.textContent = "Start Speech Recognition";
          isListening = false;
        } else {
          startSpeechRecognition();
          speechButton.textContent = "Stop Speech Recognition";
        }
      });
    </script>
  </body>
</html>
